# mediamtx.yml

paths:
  cam:
    source: rpiCamera
    # source: publisher
    rpiCameraWidth: 1280
    rpiCameraHeight: 720
    rpiCameraFPS: 60.0
    rpiCameraIDRPeriod: 120
    # rpiCameraBitrate: 2000000

    # This reduces "catch-up" lag if the network blips.
    rpiCameraAfMode: manual
    rpiCameraLensPosition: 0.0
    rpiCameraProfile: baseline
    # rpiCameraLensPosition: 0.0

  mic:
    source: publisher

# WebRTC Server settings
webrtc: yes
webrtcAddress: :8889
webrtcEncryption: yes # CHANGE THIS TO YES
webrtcServerKey: rover.tail9d0237.ts.net.key # Path to the file from Step 1
webrtcServerCert: rover.tail9d0237.ts.net.crt # Path to the file from Step 1

webrtcAllowOrigins: ["*"]
webrtcLocalUDPAddress: :8189
webrtcIPsFromInterfaces: yes
webrtcAdditionalHosts: [100.109.197.90] # Your Pi's Tailscale IP

# Added STUN server to help the browser find the Pi
webrtcICEServers2:
  - url: stun:stun.l.google.com:19302

api: yes
apiAddress: "0.0.0.0:9997"
